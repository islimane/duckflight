<template name="recoverPassword">
    {{> GA}} <!--Google Analytics-->
    <div class="container-fluid">
        <div class="row text-center">
            <div class="col-xs-12">
                <div class="verifications-page">
                    <div class="verifications-wrapper">
                        <div class="verifications-header">
                            <img src="/DFIcon.png">
                            <h3>Duckflight Recover Password</h3>
                            <i class="fa fa-envelope-o"></i> <i class="fa fa-check"></i>
                            <p>Recover your password</p>
                            <p>For this process is necessary you have a verified email</p>
                        </div>
                        <div class="verifications-form">
                            {{#if userToVerify}}
                                <div class="user-header">
                                    <img class='avatar' src="{{userToVerify.avatar}}"/>
                                    <p class="username">{{userToVerify.username}}</p>
                                </div>
                                <div class="emails-wrapper">
                                    {{#if sentMail}}
                                        <p>Recover link sent to <strong>{{currentEmail}}</strong>. Check It!</p>
                                        <p>If not received it, try again!</p>
                                        <button id='resend-button' type="button" class="generic"><i class="fa fa-paper-plane-o"></i> Resend</button>
                                    {{else}}
                                        {{#if emailsVerified}}
                                            {{>emailsListRecover emails = emailsVerified}}
                                        {{else}}
                                            <div class="error-mails">
                                                <p>Sorry, you has not mails verified already.</p>

                                                <p>Verify some of your emails!</p>
                                                <button id='verify-email-button' class='generic' type="button">Verify email</button>
                                            </div>
                                        {{/if}}
                                        {{#if errorSent}}
                                            <p class="message-error"><i class="fa fa-exclamation-triangle"></i> Error sending the verification link, maybe incorrect address!</p>
                                        {{/if}}
                                    {{/if}}
                                </div>
                                <div class="notions">
                                    <p>If you click recover you will receive a email with a link to recover your password!</p>
                                </div>
                            {{else}}
                                {{>searchEmails}}
                            {{/if}}
                        </div>
                        <div class="back-wrapper">
                            <button id='back' type="button"><i class="fa fa-arrow-circle-o-left"></i> back</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="emailsListRecover">
    <p class="text-left"><i class="fa fa-envelope"></i> Your Emails: </p>
    <ul class="email-list">
        {{#each emails}}
            {{>emailItemRecover}}
        {{/each}}
    </ul>
</template>

<template name="emailItemRecover">
    {{#if verified}}
        <li>
            <i class="fa fa-check-circle"></i><p>{{address}}</p>
            <button class="generic"><i class="fa fa-key"></i> Recover</button>
        </li>
    {{else}}
        <li class="pending">
            <i class="status fa fa-exclamation"></i><p>{{address}}</p>
        </li>
    {{/if}}
</template>


<template name="resetPassword">
    <div class="container-fluid">
        <div class="row text-center">
            <div class="col-xs-12">
                <div class="verifications-page">
                    <div class="verifications-wrapper">
                        <div class="verifications-header">
                            <img src="/DFIcon.png">
                            <h3>Duckflight Reset Password</h3>
                            <i class="fa fa-key"></i> <i class="fa fa-check"></i>
                            <p>Reset your password</p>
                        </div>
                        <div class="verifications-form">
                            <div class="user-header">
                                <p class="username">Please create a new password for your account!</p>
                            </div>
                            <div class="unlock-manager">
                                {{#if resetting}}
                                    {{#if success}}
                                        <div class="success-msg">
                                            <p><i class="fa fa-check"></i></p>
                                            <h3>Success!</h3>
                                            <p>Your password has been reset with success</p>
                                        </div>
                                    {{else}}
                                        <div class="searching-box">
                                            <p>Resetting your password ...</p>
                                            <p class="text-center"><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw margin-bottom"></i></p>
                                        </div>
                                    {{/if}}
                                {{else}}
                                    <form id="new-password-form">
                                        <div class="form-item">
                                            <label><i class="fa fa-key"></i></label>
                                            <input id='password' type="password" placeholder='Enter new password' autocomplete="off" required>
                                        </div>
                                        <div class="form-item">
                                            <label><i class="fa fa-key"></i></label>
                                            <input id='repassword' type="password" placeholder='Repeat new password' autocomplete="off" required>
                                        </div>
                                        {{#if errormsg}}
                                            <p class="error-msg">
                                                <i class="fa fa-exclamation-triangle"></i> {{errormsg}}
                                            </p>
                                        {{/if}}

                                        <button type="submit" class="generic"><i class="fa fa-check"></i> Done</button>
                                    </form>
                                {{/if}}
                            </div>
                        </div>
                        <div class="back-wrapper">
                            <button id='back' type="button"><i class="fa fa-arrow-circle-o-left"></i> back</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>